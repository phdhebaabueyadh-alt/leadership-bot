<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
<meta charset="utf-8" />
<title>بوت القيادة التربوية</title>
<meta name="viewport" content="width=device-width,initial-scale=1" />
<style>
  body { font-family: "Segoe UI", Tahoma, Arial, sans-serif; background:#f3f6fb; margin:0; padding:20px; }
  .container { max-width:900px; margin:0 auto; background:#fff; border-radius:12px; box-shadow:0 6px 18px rgba(20,30,50,0.08); padding:18px; }
  h1 { text-align:center; color:#0b63c7; margin:6px 0 14px; }
  .top { display:flex; gap:10px; margin-bottom:12px; flex-wrap:wrap; }
  .patterns { flex:1; }
  .messages { height:420px; overflow:auto; border:1px solid #e6eefb; border-radius:10px; padding:12px; background:#fbfeff; }
  .msg { margin:8px 0; padding:10px 12px; border-radius:10px; max-width:78%; }
  .user { background:#dff0ea; margin-left:auto; text-align:right; }
  .bot { background:#f1f5f9; text-align:right; }
  .input-row { display:flex; gap:8px; margin-top:12px; }
  input[type="text"] { flex:1; padding:10px; border-radius:8px; border:1px solid #d3e3fb; }
  button { background:#0b63c7; color:#fff; border:none; padding:10px 14px; border-radius:8px; cursor:pointer; }
  button.secondary { background:#5b9bd5; }
  .hint { color:#556; font-size:0.9rem; margin-top:8px; }
  .chip { display:inline-block; padding:6px 10px; margin:4px; background:#eef6ff; color:#0b63c7; border-radius:20px; cursor:pointer; }
  pre { white-space:pre-wrap; font-family:inherit; }
</style>
</head>
<body>
  <div class="container">
    <h1>🤖 بوت القيادة التربوية</h1>

    <div class="top">
      <div class="patterns">
        <label><strong>ابحث أو اختر نمطًا:</strong></label><br>
        <input id="userInput" type="text" placeholder="مثال: ما هي سمات القيادة التحويلية؟ أو القيادة الخضراء" />
      </div>
      <div style="display:flex;flex-direction:column;gap:8px;min-width:170px;">
        <button onclick="sendFromInput()">إرسال</button>
        <button class="secondary" onclick="showAllPatterns()">قائمة الأنماط</button>
        <button class="secondary" onclick="clearChat()">مسح الدردشة</button>
      </div>
    </div>

    <div class="messages" id="messages"></div>

    <div class="hint">
      جرب: <span class="chip" onclick="quick('القيادة الافتراضية')">القيادة الافتراضية</span>
      <span class="chip" onclick="quick('ما هي سمات القيادة بالحب')">سمات القيادة بالحب</span>
      <span class="chip" onclick="quick('التطبيقات القيادة التربوية 4.0')">تطبيقات القيادة التربوية 4.0</span>
      <span class="chip" onclick="quick('التحديات القيادة الخضراء')">تحديات القيادة الخضراء</span>
    </div>
  </div>

<script>
/* === قاعدة المعرفة (الـ15 نمط - موجز ملخص) === */
const KB = {
  "القيادة الافتراضية": {
    "تعريف": "نمط قيادي يعتمد على التكنولوجيا وإدارة الفرق عن بعد عبر منصات اتصال رقمية.",
    "سمات": ["المرونة", "الاعتماد على الأدوات الرقمية", "القدرة على التواصل الإلكتروني"],
    "تطبيقات": ["إدارة الفرق الموزعة جغرافياً", "التعليم الإلكتروني", "الاجتماعات والعمل عن بعد"],
    "تحديات": ["ضعف الترابط الإنساني المباشر", "مشكلات البنية التحتية الرقمية", "صعوبة قياس بعض مؤشرات الأداء"]
  },

  "القيادة الاستباقية": {
    "تعريف": "نهج يركز على التنبؤ بالمشكلات ووضع حلول استباقية قبل حدوثها.",
    "سمات": ["التفكير الاستشرافي", "التخطيط المبكر", "إدارة المخاطر"],
    "تطبيقات": ["خطط الطوارئ المدرسية", "استشراف المناهج", "الاستعداد للأزمات التعليمية"],
    "تحديات": ["الحاجة لبيانات دقيقة", "مقاومة التغيير", "صعوبة التنبؤ المطلق"]
  },

  "القيادة بالحب": {
    "تعريف": "قيادة ترتكز على الاحترام، الرعاية والتحفيز العاطفي لبناء بيئة داعمة.",
    "سمات": ["التعاطف", "الاحتواء", "بناء الثقة"],
    "تطبيقات": ["تعزيز الانتماء داخل المدارس", "دعم المعلمين نفسياً", "بناء ثقافة رعاية للطلاب"],
    "تحديات": ["احتمال الخلط بين الحزم واللطف", "استغلال بعض الأفراد للمرونة"]
  },

  "القيادة الخادمة": {
    "تعريف": "فلسفة قيادة تضع خدمة الآخرين وتمكينهم في المقدمة.",
    "سمات": ["التواضع", "الاستماع الفعال", "تمكين الفريق"],
    "تطبيقات": ["دعم المعلمين والطلاب", "قيادة المبادرات المجتمعية", "التوجيه الشخصي للكوادر"],
    "تحديات": ["رؤية البعض أنها ضعف", "بطء اتخاذ القرار في بيئات هرمية"]
  },

  "القيادة بالجودة الشاملة": {
    "تعريف": "التركيز على التحسين المستمر وتطبيق معايير الجودة في جميع عمليات المؤسسة.",
    "سمات": ["التحسين المستمر", "الالتزام بالمعايير", "مشاركة جميع الأطراف"],
    "تطبيقات": ["تطوير المناهج", "تقييم أداء المعلمين", "نظم ضمان الجودة"],
    "تحديات": ["تكاليف التنفيذ", "مقاومة التغيير", "حاجة لتدريب مستمر"]
  },

  "القيادة الاستراتيجية": {
    "تعريف": "قيادة تربط بين رؤية بعيدة المدى وقرارات حالية لتحقيق أهداف مؤسسية.",
    "سمات": ["وضوح الرؤية", "التخطيط الشامل", "إدارة الموارد"],
    "تطبيقات": ["التخطيط المدرسي طويل الأمد", "مراعاة التطورات المستقبلية في التعليم"],
    "تحديات": ["فجوة التنفيذ", "اعتماد على دعم مؤسسي وسياسي"]
  },

  "القيادة بالتجوال": {
    "تعريف": "قائد يتواجد ميدانياً بين الأفراد لمتابعة الأداء وحل المشكلات فوراً.",
    "سمات": ["القرب الميداني", "الملاحظة الفورية", "التواصل الوجهي"],
    "تطبيقات": ["جولات صفية يومية", "متابعة مشاريع مدرسية ميدانية"],
    "تحديات": ["استهلاك وقت القائد", "تركيز زائد على التفاصيل على حساب الاستراتيجية"]
  },

  "القيادة التحويلية": {
    "تعريف": "قيادة تهدف لإحداث تغيير جذري في ثقافة وسلوك المؤسسة عبر الإلهام.",
    "سمات": ["الرؤية الملهمة", "الكاريزما", "تشجيع الابتكار"],
    "تطبيقات": ["إصلاح قواعد التدريس", "بناء ثقافة مؤسسية جديدة"],
    "تحديات": ["اعتماد مبالغ على القائد", "مقاومة مستمرة للتغيير"]
  },

  "قيادة التغيير": {
    "تعريف": "إدارة منهجية لانتقال المؤسسة من وضع إلى آخر محسّن ومنظم.",
    "سمات": ["المرونة", "التواصل الفعّال", "وضع خطط انتقال"],
    "تطبيقات": ["التحول الرقمي للمؤسسات التعليمية", "إعادة هيكلة البرامج الدراسية"],
    "تحديات": ["رفض أصحاب المصلحة", "تكاليف التحول", "فقدان استقرار مؤقت"]
  },

  "القيادة الرنانة": {
    "تعريف": "قيادة تعتمد على الذكاء العاطفي لإحداث تأثير إيجابي ملموس في الفريق.",
    "سمات": ["التعاطف", "الوعي الذاتي", "القدرة على بث الحماس"],
    "تطبيقات": ["دعم الصحة النفسية في المدارس", "تحفيز فرق التعليم"],
    "تحديات": ["إرهاق عاطفي للقائد", "صعوبة الحفاظ على الاتساق"]
  },

  "قيادة المرأة للمنظومة الأخلاقية": {
    "تعريف": "دور قيادي للمرأة يركز على ترسيخ القيم الأخلاقية والعدالة في المؤسسات.",
    "سمات": ["النزاهة", "الرحمة", "العدالة"],
    "تطبيقات": ["تعزيز المناهج الأخلاقية", "نمذجة سلوك قيادي مسؤول"],
    "تحديات": ["الصور النمطية المجتمعية", "نقص التمثيل والدعم المؤسسي"]
  },

  "القيادة التربوية 4.0": {
    "تعريف": "تكامل تكنولوجيا الثورة الصناعية الرابعة مع الممارسات القيادية التربوية.",
    "سمات": ["الرقمنة", "استخدام البيانات", "الابتكار التعليمي"],
    "تطبيقات": ["فصول ذكية", "منصات تعلم مدمجة", "تحليلات أداء طلابية"],
    "تحديات": ["الفجوة الرقمية", "نقص تدريب المعلمين", "تكلفة البنية"]
  },

  "القيادة الخضراء": {
    "تعريف": "قيادة تراعي الاستدامة والمسؤولية البيئية في القرارات والسياسات.",
    "سمات": ["الوعي البيئي", "ترشيد الموارد", "الالتزام بالاستدامة"],
    "تطبيقات": ["مشروعات تدوير في المدارس", "منهجيات تعليمية صديقة للبيئة"],
    "تحديات": ["تكلفة التنفيذ", "ضعف الوعي المؤسسي", "الحاجة لدعم خارجي"]
  },

  "القيادة الروحية": {
    "تعريف": "قيادة تستند إلى القيم والمعاني الروحية لبث الأمل والاتجاه الأخلاقي.",
    "سمات": ["البصيرة القيمية", "القدوة", "إعطاء معنى للعمل"],
    "تطبيقات": ["برامج التوجيه القيمي", "دعم الرفاه النفسي للطلبة"],
    "تحديات": ["صعوبة القياس الكمي للأثر", "تفاوت المعتقدات بين الأفراد"]
  },

  "القيادة الناعمة": {
    "تعريف": "قيادة تعتمد على الحكمة والذكاء العاطفي بدلاً من الصرامة.",
    "سمات": ["الصبر", "الإقناع", "الدبلوماسية"],
    "تطبيقات": ["الوساطة المدرسية", "إدارة النزاعات بحساسة"], 
    "تحديات": ["قد تُفسر كضعف في بيئات صارمة", "تحتاج وقتًا أطول لرؤية النتائج"]
  }
};

/* ===== أدوات بسيطة لتحليل طلب المستخدم ===== */
const patterns = Object.keys(KB);

function normalize(text) {
  return text.replace(/[؟?.,!؛،]/g,'').trim().toLowerCase();
}

/* كشف ما إذا طلب المستخدم حقلًا محددًا */
function detectField(query) {
  const q = normalize(query);
  if (q.includes("تعريف") || q.includes("ما هو") || q.includes("ما هي") || q.includes("عرف")) return "تعريف";
  if (q.includes("سمات") || q.includes("مميزات") || q.includes("خصائص")) return "سمات";
  if (q.includes("تطبيقات") || q.includes("استخدام") || q.includes("أين") || q.includes("أمثلة")) return "تطبيقات";
  if (q.includes("تحديات") || q.includes("مشاكل") || q.includes("معيقات") || q.includes("عقبات")) return "تحديات";
  if (q.includes("كُل") || q.includes("الكل") || q.includes("جميع") || q.includes("كل شيء")) return "all";
  return null; // لم يُحدد: نقرر لاحقًا
}

/* إيجاد النمط المقصود في الجملة (أو اقتراح قريب) */
function findPattern(query) {
  const q = normalize(query);
  // أول محاولة: تطابق اسم النمط بالكامل داخل الجملة
  for (let p of patterns) {
    if (q.includes(p)) return p;
    // تحقق بصيغ أقصر (مثلاً "التحويلية" --> "القيادة التحويلية")
    const short = p.replace(/^ال/, '').trim().toLowerCase(); 
    if (short && q.includes(short)) return p;
  }
  return null;
}

/* بناء الرد */
function buildResponse(patternKey, field) {
  const item = KB[patternKey];
  if (!item) return "عذراً، لم أجد هذا النمط.";
  if (!field || field === "all") {
    return renderFull(patternKey, item);
  }
  if (field in item) {
    const val = item[field];
    if (Array.isArray(val)) return `🔹 ${field} ${patternKey}:\n• ${val.join("\n• ")}`;
    return `🔹 ${field} ${patternKey}:\n${val}`;
  }
  return "لم أفهم الجزء المطلوب، اكتب: تعريف / سمات / تطبيقات / تحديات أو اكتب اسم النمط فقط.";
}

function renderFull(key, obj) {
  return `📌 ${key}\n\n✅ التعريف:\n${obj["تعريف"]}\n\n🌟 السمات:\n• ${obj["سمات"].join("\n• ")}\n\n🛠 التطبيقات:\n• ${obj["تطبيقات"].join("\n• ")}\n\n⚠️ التحديات:\n• ${obj["تحديات"].join("\n• ")}`;
}

/* ===== واجهة المستخدم والتعامل مع الرسائل ===== */
const messagesEl = document.getElementById("messages");
function appendMessage(sender, html) {
  const div = document.createElement("div");
  div.className = "msg " + (sender === "user" ? "user" : "bot");
  if (sender === "user") div.innerText = html;
  else {
    // bot: نسمح ببعض HTML (روابط بسيطة) لذا نستخدم innerHTML بعد تأمين النص
    div.innerHTML = html.replace(/\n/g, "<br>");
  }
  messagesEl.appendChild(div);
  messagesEl.scrollTop = messagesEl.scrollHeight;
}

/* العملية الأساسية عند إرسال المستخدم */
function processQuery(raw) {
  const q = raw.trim();
  if (!q) return;
  appendMessage("user", q);

  // اكتشاف الحقل والنمط
  const field = detectField(q);
  const pat = findPattern(q);

  if (!pat) {
    // اقتراح قائمة أو توجيه
    const suggestion = "لم أتعرف على نمط محدد. يمكنك اختيار أحد الأنماط التالية من القائمة أو كتابته بالطلب:\n• " + patterns.join("\n• ");
    appendMessage("bot", suggestion);
    return;
  }

  // إذا لم يذكر المستخدم حقلاً محدداً نعرض كل شيء
  const usedField = field ? field : "all";
  const resp = buildResponse(pat, usedField === "all" ? "all" : usedField);
  appendMessage("bot", resp);
}

/* الأحداث */
function sendFromInput() {
  const input = document.getElementById("userInput");
  processQuery(input.value);
  input.value = "";
  input.focus();
}

function quick(text) {
  document.getElementById("userInput").value = text;
  sendFromInput();
}

function showAllPatterns() {
  appendMessage("bot", "قائمة الأنماط المتاحة:\n• " + patterns.join("\n• "));
}

function clearChat() {
  messagesEl.innerHTML = "";
  appendMessage("bot", "أهلًا! اسأل عن أي نمط قيادي أو اضغط قائمة الأنماط.");
}

/* بدء المحادثة */
clearChat();

/* دعم تنفيذ Enter لإرسال */
document.getElementById("userInput").addEventListener("keypress", function(e){
  if (e.key === "Enter") { sendFromInput(); e.preventDefault(); }
});
</script>
</body>
</html>